<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>CHULO SHOP â€” Moda Urbana</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TEMAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root, [data-theme="light"] {
  --bg:        #f5f4f0;
  --surface:   #ffffff;
  --card:      #ffffff;
  --border:    #e0ddd8;
  --text:      #0d0d0d;
  --text2:     #555;
  --gray:      #999;
  --red:       #e63329;
  --gold:      #c8a84b;
  --nav-h:     60px;
  --hero-side: #f0ede8;
}
[data-theme="dark"] {
  --bg:        #0d0d0d;
  --surface:   #161616;
  --card:      #1c1c1c;
  --border:    #2a2a2a;
  --text:      #f5f5f5;
  --text2:     #aaa;
  --gray:      #666;
  --hero-side: #141414;
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior: smooth; }
body {
  font-family: 'Outfit', sans-serif;
  background: var(--bg); color: var(--text);
  overflow-x: hidden; -webkit-text-size-adjust: 100%;
  transition: background .4s, color .4s;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOP BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.topbar {
  background: var(--red); color: #fff;
  text-align: center; font-size: 11px;
  letter-spacing: 2px; text-transform: uppercase;
  padding: 7px 1rem; font-weight: 600;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
nav {
  position: sticky; top: 0; z-index: 1000;
  background: var(--surface); border-bottom: 1px solid var(--border);
  height: var(--nav-h);
  display: flex; align-items: center;
  padding: 0 1.5rem; gap: 0.6rem;
  transition: background .4s, border-color .4s;
}
.logo {
  font-family: 'Bebas Neue', sans-serif; font-size: 1.8rem;
  letter-spacing: 5px; color: var(--text); text-decoration: none; margin-right: auto;
}
.logo span { color: var(--red); }
.gender-btns { display: flex; gap: 4px; }
.gbtn {
  font-family: 'Bebas Neue', sans-serif; font-size: 1rem; letter-spacing: 2px;
  padding: 6px 16px; border: 1px solid var(--border);
  background: transparent; color: var(--gray); cursor: pointer; border-radius: 2px;
  transition: all .2s;
}
.gbtn:hover { border-color: var(--text); color: var(--text); }
.gbtn.active { background: var(--text); color: var(--bg); border-color: var(--text); }
.gbtn.women.active { background: var(--red); border-color: var(--red); color: #fff; }

.mode-btn {
  background: var(--border); border: none;
  width: 36px; height: 36px; border-radius: 50%; cursor: pointer;
  font-size: 1rem; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  transition: transform .3s, background .3s;
}
.mode-btn:hover { transform: rotate(20deg); }

/* â”€â”€ BotÃ³n favoritos en el nav â”€â”€ */
.wish-nav-btn {
  background: transparent; border: 1px solid var(--border);
  width: 36px; height: 36px; border-radius: 50%; cursor: pointer;
  font-size: 1rem; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  transition: all .2s; position: relative;
}
.wish-nav-btn:hover { border-color: var(--red); }
.wish-nav-count {
  position: absolute; top: -5px; right: -5px;
  background: var(--red); color: #fff;
  border-radius: 50%; width: 16px; height: 16px;
  font-size: 9px; font-weight: 700; font-family: 'Outfit', sans-serif;
  display: none; align-items: center; justify-content: center;
}
.wish-nav-count.show { display: flex; }

.cart-btn {
  background: var(--red); color: #fff; border: none;
  padding: 8px 16px; font-family: 'Bebas Neue', sans-serif;
  font-size: 1rem; letter-spacing: 2px; cursor: pointer; border-radius: 2px;
  display: flex; align-items: center; gap: 8px;
  transition: opacity .2s;
}
.cart-btn:hover { opacity: .85; }
.cart-badge {
  background: #fff; color: var(--red);
  border-radius: 50%; width: 18px; height: 18px; font-size: 10px;
  font-family: 'Outfit', sans-serif; font-weight: 700;
  display: flex; align-items: center; justify-content: center;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero {
  background: var(--surface);
  display: flex; min-height: 460px; overflow: hidden;
  border-bottom: 1px solid var(--border);
}
.hero-left {
  flex: 1 1 50%; min-width: 0;
  padding: 5rem 3rem 4rem;
  display: flex; flex-direction: column; justify-content: center;
}
.hero-tag { font-size: 11px; letter-spacing: 4px; text-transform: uppercase; color: var(--red); font-weight: 600; margin-bottom: 1rem; display: block; }
.hero-title { font-family: 'Bebas Neue', sans-serif; font-size: 5rem; line-height: .9; margin-bottom: 1.2rem; }
.hero-title em { color: var(--red); font-style: normal; }
.hero-sub { color: var(--text2); font-size: 15px; line-height: 1.7; margin-bottom: 2rem; max-width: 380px; }
.hero-cta {
  display: inline-block; background: var(--red); color: #fff;
  padding: 14px 36px; font-family: 'Bebas Neue', sans-serif;
  letter-spacing: 3px; font-size: 1.1rem; border: none; cursor: pointer; border-radius: 2px;
  align-self: flex-start; transition: opacity .2s;
}
.hero-cta:hover { opacity: .85; }
.hero-right {
  flex: 1 1 50%; background: var(--hero-side);
  position: relative; overflow: hidden; min-height: 460px;
  display: flex; align-items: center; justify-content: center;
}
.hero-right::before {
  content: ''; position: absolute; inset: 0;
  background: radial-gradient(circle at 50% 45%, rgba(230,51,41,.09) 0%, transparent 65%);
  pointer-events: none;
}
.hero-deco-text {
  position: absolute; font-family: 'Bebas Neue', sans-serif;
  font-size: 9rem; letter-spacing: -2px;
  color: var(--text); opacity: .04;
  pointer-events: none; user-select: none; white-space: nowrap;
}
.sc-card {
  position: relative; z-index: 2;
  width: 54%; max-width: 230px;
  background: var(--surface); border-radius: 14px; overflow: hidden;
  border: 1px solid var(--border);
  box-shadow: 0 24px 60px rgba(0,0,0,.14), 0 4px 16px rgba(0,0,0,.08);
  opacity: 0; transform: translateY(36px) scale(.94);
  transition: opacity .65s ease, transform .65s ease;
}
.sc-card.in  { opacity: 1; transform: translateY(0) scale(1); }
.sc-card.out { opacity: 0; transform: translateY(-28px) scale(.94); }
.sc-img-wrap { width: 100%; aspect-ratio: 5/6; position: relative; background: var(--hero-side); }
.sc-img-inner {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center; font-size: 5rem;
}
.sc-img-inner img { width: 100%; height: 100%; display: block; object-fit: cover; object-position: center top; }
.sc-badge { position: absolute; top: 10px; left: 10px; background: var(--red); color: #fff; font-size: 9px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; padding: 3px 8px; border-radius: 3px; }
.sc-info { padding: 13px 14px 15px; }
.sc-name  { font-size: 13px; font-weight: 600; color: var(--text); margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.sc-price { font-size: 15px; font-weight: 700; color: var(--red); }
.sc-dots  { position: absolute; bottom: 18px; left: 50%; transform: translateX(-50%); display: flex; gap: 6px; z-index: 3; }
.sc-dot   { height: 6px; border-radius: 3px; cursor: pointer; transition: all .35s; width: 6px; background: rgba(0,0,0,.18); }
[data-theme="dark"] .sc-dot { background: rgba(255,255,255,.18); }
.sc-dot.on { width: 22px; background: var(--red); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CATEGORÃAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cats {
  background: var(--surface); border-bottom: 1px solid var(--border);
  display: flex; overflow-x: auto; -webkit-overflow-scrolling: touch;
  padding: 0 1.5rem;
  position: sticky; top: var(--nav-h); z-index: 900;
}
.cats::-webkit-scrollbar { display: none; }
.ctab {
  background: transparent; border: none; border-bottom: 2px solid transparent;
  color: var(--gray); font-family: 'Outfit', sans-serif;
  font-size: 12px; font-weight: 500; letter-spacing: 1.5px; text-transform: uppercase;
  padding: 16px 20px; white-space: nowrap; cursor: pointer; transition: all .2s;
}
.ctab:hover { color: var(--text); }
.ctab.active { color: var(--text); border-bottom-color: var(--red); font-weight: 600; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHOP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.shop { padding: 2.5rem 1.5rem 5rem; max-width: 1400px; margin: 0 auto; }
.shop-header {
  display: flex; align-items: baseline;
  gap: 1rem; margin-bottom: 2rem; padding-bottom: 1rem;
  border-bottom: 1px solid var(--border);
}
.shop-title { font-family: 'Bebas Neue', sans-serif; font-size: 2rem; letter-spacing: 4px; }
.shop-count { color: var(--gray); font-size: 13px; }

/* â”€â”€ GRID: espacio visible entre tarjetas â”€â”€ */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 14px;   /* <-- espacio entre tarjetas */
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRODUCT CARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.pcard {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  position: relative; cursor: pointer; overflow: hidden;
  transition: transform .2s, box-shadow .2s;
}
.pcard:hover {
  transform: translateY(-4px);
  box-shadow: 0 14px 36px rgba(0,0,0,.10);
}
[data-theme="dark"] .pcard:hover { box-shadow: 0 14px 36px rgba(0,0,0,.4); }

.pimg-wrap {
  position: relative; width: 100%; aspect-ratio: 3/4;
  background: var(--hero-side); overflow: hidden;
  border-radius: 7px 7px 0 0;
}
.pimg-inner {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center; font-size: 4rem;
}
.pimg-inner img { width: 100%; height: 100%; display: block; object-fit: cover; object-position: center top; }

.pbadge {
  position: absolute; top: 10px; left: 10px;
  font-size: 9px; font-weight: 700; letter-spacing: 1.5px;
  text-transform: uppercase; padding: 3px 8px; border-radius: 2px; z-index: 2;
}
.pbadge-sale { background: var(--red); color: #fff; }
.pbadge-new  { background: var(--text); color: var(--bg); }
.pbadge-hot  { background: var(--gold); color: #111; }

.pwish {
  position: absolute; top: 10px; right: 10px; z-index: 2;
  background: rgba(0,0,0,.38); border: none; width: 32px; height: 32px;
  border-radius: 50%; cursor: pointer; font-size: 14px;
  display: flex; align-items: center; justify-content: center;
  transition: background .2s; backdrop-filter: blur(6px);
}
.pwish:hover { background: rgba(0,0,0,.65); }

.pinfo {
  padding: 14px 14px 16px;
  border-top: 1px solid var(--border);
}
.pbrand { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: var(--gray); margin-bottom: 4px; }
.pname  { font-size: 14px; font-weight: 500; margin-bottom: 10px; line-height: 1.3; }
.pprice-row { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; }
.pprice     { font-size: 16px; font-weight: 700; }
.pprice-old { font-size: 12px; color: var(--gray); text-decoration: line-through; }
.pdiscount  { font-size: 11px; color: var(--red); font-weight: 700; }

/* â”€â”€ BotÃ³n Agregar con borde resaltado â”€â”€ */
.padd {
  width: 100%; padding: 10px;
  border: 2px solid var(--text);   /* borde grueso y contrastante */
  background: transparent; color: var(--text);
  font-family: 'Bebas Neue', sans-serif; letter-spacing: 2px; font-size: .95rem;
  cursor: pointer; border-radius: 4px;
  transition: all .2s;
}
.padd:hover { background: var(--text); color: var(--bg); }
.padd.added { background: var(--red); border-color: var(--red); color: #fff; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PANEL DE FAVORITOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.wish-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.55); z-index: 2000;
  opacity: 0; pointer-events: none; transition: opacity .3s;
}
.wish-overlay.open { opacity: 1; pointer-events: all; }

.wish-panel {
  position: fixed; top: 0; right: 0; bottom: 0; width: 400px; max-width: 100vw;
  background: var(--surface); border-left: 1px solid var(--border);
  z-index: 2001; display: flex; flex-direction: column;
  transform: translateX(100%);
  transition: transform .35s cubic-bezier(.4,0,.2,1);
}
.wish-panel.open { transform: translateX(0); }

.wish-head {
  padding: 1.2rem 1.5rem;
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between;
}
.wish-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.5rem; letter-spacing: 3px; }
.wish-x {
  background: none; border: none; color: var(--text); font-size: 1.5rem; cursor: pointer;
  transition: transform .2s, color .2s;
}
.wish-x:hover { transform: rotate(90deg); color: var(--red); }

.wish-body { flex: 1; overflow-y: auto; -webkit-overflow-scrolling: touch; padding: 1rem 1.5rem; }

.wish-empty {
  text-align: center; padding: 4rem 1rem; color: var(--gray);
}
.wish-empty .big { font-size: 3.5rem; margin-bottom: 1rem; }
.wish-empty p { font-size: 14px; line-height: 1.7; }

/* Tarjeta dentro del panel favoritos */
.witem {
  display: flex; gap: 12px; padding: 1rem 0;
  border-bottom: 1px solid var(--border);
  animation: slideIn .25s ease;
}
@keyframes slideIn { from { opacity:0; transform: translateX(16px) } to { opacity:1; transform:none } }

.witem-img {
  width: 64px; height: 80px; background: var(--hero-side);
  flex-shrink: 0; border-radius: 4px; overflow: hidden;
  display: flex; align-items: center; justify-content: center; font-size: 2rem;
}
.witem-img img { width: 100%; height: 100%; object-fit: cover; object-position: center top; }

.witem-info { flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
.witem-name  { font-size: 13px; font-weight: 500; line-height: 1.3; margin-bottom: 4px; }
.witem-price { font-size: 14px; font-weight: 700; color: var(--red); }

.witem-actions { display: flex; gap: 8px; margin-top: 8px; }
.witem-add {
  flex: 1; padding: 7px 8px;
  border: 2px solid var(--text); background: transparent; color: var(--text);
  font-family: 'Bebas Neue', sans-serif; letter-spacing: 1.5px; font-size: .82rem;
  cursor: pointer; border-radius: 3px; transition: all .2s;
}
.witem-add:hover { background: var(--text); color: var(--bg); }
.witem-add.added { background: var(--red); border-color: var(--red); color: #fff; }
.witem-del {
  width: 32px; height: 32px; border: 1px solid var(--border);
  background: none; color: var(--gray); cursor: pointer; border-radius: 3px;
  display: flex; align-items: center; justify-content: center; font-size: 14px;
  transition: all .2s; flex-shrink: 0;
}
.witem-del:hover { border-color: var(--red); color: var(--red); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LIGHTBOX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.lb {
  position: fixed; inset: 0; background: rgba(0,0,0,.96); z-index: 5000;
  display: flex; flex-direction: column;
  opacity: 0; pointer-events: none; transition: opacity .3s;
}
.lb.open { opacity: 1; pointer-events: all; }
.lb-head {
  display: flex; align-items: center; justify-content: space-between;
  padding: 1rem 1.5rem; border-bottom: 1px solid #2a2a2a; flex-shrink: 0;
}
.lb-name  { font-family: 'Bebas Neue', sans-serif; font-size: 1.2rem; letter-spacing: 3px; color: #fff; }
.lb-close { background: none; border: none; color: #fff; font-size: 1.8rem; cursor: pointer; transition: color .2s; }
.lb-close:hover { color: var(--red); }
.lb-body  {
  flex: 1; display: flex; align-items: center; justify-content: center;
  position: relative; overflow: hidden; min-height: 0; padding: 1.5rem;
}
.lb-body img { max-width: 100%; max-height: 72vh; width: auto; height: auto; display: block; object-fit: contain; border-radius: 4px; }
.lb-emoji { font-size: 10rem; }
.lb-arrow {
  position: absolute; top: 50%; transform: translateY(-50%);
  background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.15);
  color: #fff; width: 44px; height: 44px; border-radius: 50%; font-size: 1rem;
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  transition: all .2s; z-index: 2;
}
.lb-arrow:hover { background: var(--red); border-color: var(--red); }
.lb-arrow.prev { left: 1rem; }
.lb-arrow.next { right: 1rem; }
.lb-foot { padding: 1rem 1.5rem 1.5rem; flex-shrink: 0; text-align: center; }
.lb-counter { font-size: 12px; letter-spacing: 2px; color: #555; text-transform: uppercase; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARRITO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cart-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.55); z-index: 2000;
  opacity: 0; pointer-events: none; transition: opacity .3s;
}
.cart-overlay.open { opacity: 1; pointer-events: all; }
.cart-panel {
  position: fixed; top: 0; right: 0; bottom: 0; width: 400px; max-width: 100vw;
  background: var(--surface); border-left: 1px solid var(--border); z-index: 2001;
  display: flex; flex-direction: column;
  transform: translateX(100%);
  transition: transform .35s cubic-bezier(.4,0,.2,1);
}
.cart-panel.open { transform: translateX(0); }
.cart-head {
  padding: 1.2rem 1.5rem; border-bottom: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between;
}
.cart-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.5rem; letter-spacing: 3px; }
.cart-x { background: none; border: none; color: var(--text); font-size: 1.5rem; cursor: pointer; transition: transform .2s; }
.cart-x:hover { transform: rotate(90deg); }
.cart-items { flex: 1; overflow-y: auto; -webkit-overflow-scrolling: touch; padding: 1rem 1.5rem; }
.cart-empty-msg { text-align: center; padding: 4rem 1rem; color: var(--gray); }
.cart-empty-msg .big { font-size: 3rem; margin-bottom: 1rem; }
.citem { display: flex; gap: 12px; padding: 1rem 0; border-bottom: 1px solid var(--border); }
.citem-img {
  width: 64px; height: 80px; background: var(--hero-side);
  flex-shrink: 0; border-radius: 4px; overflow: hidden;
  display: flex; align-items: center; justify-content: center; font-size: 2rem;
}
.citem-img img { width: 100%; height: 100%; object-fit: cover; object-position: center top; }
.citem-info { flex: 1; }
.citem-name  { font-size: 13px; font-weight: 500; margin-bottom: 4px; line-height: 1.3; }
.citem-brand { font-size: 11px; color: var(--gray); margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase; }
.citem-price { font-size: 14px; font-weight: 700; margin-bottom: 8px; }
.citem-controls { display: flex; align-items: center; gap: 8px; }
.qty-b {
  width: 24px; height: 24px; border: 1px solid var(--border);
  background: none; color: var(--text); cursor: pointer; font-size: 1rem; border-radius: 2px;
  display: flex; align-items: center; justify-content: center; transition: all .15s;
}
.qty-b:hover { background: var(--text); color: var(--bg); border-color: var(--text); }
.qty-n  { font-size: 13px; font-weight: 600; min-width: 18px; text-align: center; }
.del-b  { background: none; border: none; color: var(--gray); cursor: pointer; font-size: 16px; margin-left: auto; transition: color .2s; }
.del-b:hover { color: var(--red); }
.cart-foot { padding: 1.2rem 1.5rem 1.5rem; border-top: 1px solid var(--border); }
.cart-total-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
.cart-total-label { font-family: 'Bebas Neue', sans-serif; letter-spacing: 2px; font-size: .95rem; color: var(--gray); }
.cart-total-val   { font-family: 'Bebas Neue', sans-serif; font-size: 1.6rem; }
.checkout-b {
  width: 100%; padding: 14px; background: var(--red); color: #fff; border: none;
  font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; letter-spacing: 3px;
  cursor: pointer; border-radius: 2px; margin-bottom: 10px; transition: opacity .2s;
}
.checkout-b:hover { opacity: .85; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FORMULARIO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.order-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.8); z-index: 4000;
  display: flex; align-items: center; justify-content: center;
  opacity: 0; pointer-events: none; transition: opacity .3s;
}
.order-overlay.open { opacity: 1; pointer-events: all; }
.order-box {
  background: var(--surface); border: 1px solid var(--border);
  width: 92%; max-width: 480px; padding: 2rem; position: relative;
  transform: translateY(30px); transition: transform .3s;
  max-height: 90vh; overflow-y: auto; -webkit-overflow-scrolling: touch; border-radius: 8px;
}
.order-overlay.open .order-box { transform: translateY(0); }
.order-close { position: absolute; top: 1rem; right: 1rem; background: none; border: none; color: var(--text); font-size: 1.5rem; cursor: pointer; }
.order-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.8rem; letter-spacing: 3px; margin-bottom: .3rem; }
.order-sub   { color: var(--gray); font-size: 13px; margin-bottom: 1.5rem; line-height: 1.5; }
.order-summary { background: var(--bg); border-left: 3px solid var(--red); padding: 1rem; margin-bottom: 1.5rem; border-radius: 2px; }
.order-summary-title { font-size: 10px; letter-spacing: 2px; text-transform: uppercase; color: var(--gray); margin-bottom: 8px; font-weight: 600; }
.order-item-row  { display: flex; justify-content: space-between; font-size: 13px; padding: 3px 0; }
.order-total-row { display: flex; justify-content: space-between; font-size: 15px; font-weight: 700; padding-top: 8px; margin-top: 8px; border-top: 1px solid var(--border); }
.fgroup { margin-bottom: 1.2rem; }
.fgroup label { display: block; font-size: 10px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 6px; color: var(--gray); }
.fgroup input, .fgroup textarea {
  width: 100%; padding: 10px 12px; border: 1px solid var(--border);
  background: var(--bg); color: var(--text);
  font-family: 'Outfit', sans-serif; font-size: 14px;
  outline: none; resize: none; border-radius: 4px; transition: border-color .2s;
}
.fgroup input:focus, .fgroup textarea:focus { border-color: var(--text); }
.fgroup input.err, .fgroup textarea.err { border-color: var(--red); }
.ferr { font-size: 11px; color: var(--red); margin-top: 4px; display: none; }
.ferr.show { display: block; }
.wa-btn {
  width: 100%; padding: 14px; background: #25D366; color: #fff; border: none; border-radius: 4px;
  font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; letter-spacing: 3px;
  cursor: pointer; margin-top: .5rem; transition: opacity .2s;
}
.wa-btn:hover { opacity: .85; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.toast {
  position: fixed; bottom: 1.5rem; left: 50%;
  transform: translateX(-50%) translateY(80px);
  background: var(--text); color: var(--bg);
  padding: 10px 22px; font-size: 13px; font-weight: 600;
  border-radius: 100px; z-index: 9000;
  transition: transform .3s cubic-bezier(.4,0,.2,1);
  pointer-events: none; white-space: nowrap;
}
.toast.show { transform: translateX(-50%) translateY(0); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE MÃ“VIL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 768px) {
  .hero { flex-direction: column; min-height: auto; }
  .hero-left { padding: 3rem 1.5rem 2rem; flex: none; width: 100%; }
  .hero-right { flex: none; width: 100%; min-height: 280px; }
  .sc-card { max-width: 160px; }
}

@media (max-width: 600px) {
  nav { padding: 0 0.85rem; gap: 5px; }
  .logo { font-size: 1.5rem; letter-spacing: 3px; }
  .gbtn { padding: 5px 10px; font-size: 0.82rem; letter-spacing: 1px; }
  .mode-btn, .wish-nav-btn { width: 32px; height: 32px; font-size: 0.9rem; }
  .cart-btn { padding: 7px 11px; font-size: 0.85rem; letter-spacing: 1px; gap: 5px; }
  .cart-badge { width: 16px; height: 16px; font-size: 9px; }

  .hero-left { padding: 2rem 1.2rem 1.5rem; }
  .hero-title { font-size: 2.8rem; }
  .hero-sub { font-size: 13px; margin-bottom: 1.4rem; }
  .hero-cta { padding: 12px 26px; font-size: 1rem; }

  .cats { padding: 0 0.85rem; }
  .ctab { padding: 13px 14px; font-size: 11px; }

  .shop { padding: 1.5rem 0.75rem 4rem; }
  .shop-title { font-size: 1.6rem; }

  /* 2 columnas bien ajustadas */
  .grid { grid-template-columns: repeat(2, 1fr); gap: 10px; }

  .pinfo { padding: 10px 10px 13px; }
  .pbrand { font-size: 9px; }
  .pname  { font-size: 12px; margin-bottom: 6px; }
  .pprice { font-size: 14px; }
  .pprice-row { margin-bottom: 8px; gap: 5px; }
  .padd   { padding: 8px; font-size: 0.78rem; letter-spacing: 1.5px; }

  /* Paneles a pantalla completa en mÃ³vil */
  .cart-panel, .wish-panel { width: 100%; }
  .order-box { padding: 1.5rem; }
}

@media (max-width: 360px) {
  .logo { font-size: 1.3rem; }
  .gbtn { padding: 4px 8px; font-size: 0.74rem; }
  .cart-btn { padding: 6px 8px; }
  .grid { gap: 8px; }
}
</style>
</head>
<body>

<div class="topbar">ğŸ”¥ EnvÃ­o gratis en pedidos mayores â€” Rebajas hasta el 50%</div>

<nav>
  <a class="logo" href="#">CHULO <span>SHOP</span></a>
  <div class="gender-btns">
    <button class="gbtn active" onclick="setGender('men',this)">Hombre</button>
    <button class="gbtn women" onclick="setGender('women',this)">Mujer</button>
  </div>
  <button class="mode-btn" id="modeBtn" onclick="toggleTheme()" title="Cambiar modo">â˜€ï¸</button>

  <!-- BotÃ³n Favoritos con contador -->
  <button class="wish-nav-btn" onclick="openWishPanel()" title="Mis favoritos">
    â¤ï¸
    <span class="wish-nav-count" id="wishNavCount">0</span>
  </button>

  <button class="cart-btn" onclick="toggleCart()">
    ğŸ›’ <span class="cart-badge" id="cartBadge">0</span>
  </button>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-left">
    <span class="hero-tag">ColecciÃ³n 2026</span>
    <h1 class="hero-title">VÃSTETE<br>PARA <em>BRILLAR</em></h1>
    <p class="hero-sub">Streetwear, moda casual y prendas premium a precios que no te detienen.</p>
    <button class="hero-cta" onclick="document.getElementById('shop').scrollIntoView({behavior:'smooth'})">Ver CatÃ¡logo</button>
  </div>
  <div class="hero-right" id="heroRight">
    <div class="hero-deco-text" id="heroDeco">CHULO</div>
    <div class="sc-card" id="scCard">
      <div class="sc-img-wrap"><div class="sc-img-inner" id="scImgInner"></div></div>
      <div class="sc-badge" id="scBadge"></div>
      <div class="sc-info">
        <div class="sc-name"  id="scName"></div>
        <div class="sc-price" id="scPrice"></div>
      </div>
    </div>
    <div class="sc-dots" id="scDots"></div>
  </div>
</section>

<!-- CATEGORÃAS -->
<div class="cats">
  <button class="ctab active" onclick="setCat('all',this)">Todo</button>
  <button class="ctab" onclick="setCat('tshirts',this)">Camisetas</button>
  <button class="ctab" onclick="setCat('pants',this)">Pantalones</button>
  <button class="ctab" onclick="setCat('pullovers',this)">SuÃ©teres</button>
  <button class="ctab" onclick="setCat('shoes',this)">Zapatos</button>
  <button class="ctab" onclick="setCat('hats',this)">Gorras</button>
  <button class="ctab" onclick="setCat('garments',this)">Prendas</button>
</div>

<!-- PRODUCTOS -->
<section class="shop" id="shop">
  <div class="shop-header">
    <h2 class="shop-title" id="shopTitle">COLECCIÃ“N HOMBRE</h2>
    <span class="shop-count" id="shopCount"></span>
  </div>
  <div class="grid" id="grid"></div>
</section>

<!-- PANEL FAVORITOS -->
<div class="wish-overlay" id="wishOverlay" onclick="closeWishPanel()"></div>
<aside class="wish-panel" id="wishPanel">
  <div class="wish-head">
    <span class="wish-title">â¤ï¸ Mis Favoritos</span>
    <button class="wish-x" onclick="closeWishPanel()">âœ•</button>
  </div>
  <div class="wish-body" id="wishBody"></div>
</aside>

<!-- CARRITO -->
<div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>
<aside class="cart-panel" id="cartPanel">
  <div class="cart-head">
    <span class="cart-title">Tu Carrito</span>
    <button class="cart-x" onclick="toggleCart()">âœ•</button>
  </div>
  <div class="cart-items" id="cartItems"></div>
  <div class="cart-foot">
    <div class="cart-total-row">
      <span class="cart-total-label">Total</span>
      <span class="cart-total-val" id="cartTotal">$0</span>
    </div>
    <button class="checkout-b" onclick="openOrder()">Proceder al Pago</button>
  </div>
</aside>

<!-- FORMULARIO -->
<div class="order-overlay" id="orderOverlay">
  <div class="order-box">
    <button class="order-close" onclick="closeOrder()">âœ•</button>
    <h2 class="order-title">Confirmar Pedido</h2>
    <p class="order-sub">Completa tus datos y te contactamos por WhatsApp ğŸšš</p>
    <div class="order-summary">
      <div class="order-summary-title">ğŸ“¦ Resumen</div>
      <div id="orderItems"></div>
      <div class="order-total-row"><span>Total</span><span id="orderTotal">$0</span></div>
    </div>
    <div class="fgroup">
      <label>ğŸ‘¤ Nombre completo *</label>
      <input type="text" id="fName" placeholder="Juan GarcÃ­a" maxlength="80">
      <div class="ferr" id="fNameErr">âš  Ingresa tu nombre</div>
    </div>
    <div class="fgroup">
      <label>ğŸ“ TelÃ©fono *</label>
      <input type="tel" id="fPhone" placeholder="55512345" maxlength="20">
      <div class="ferr" id="fPhoneErr">âš  Ingresa tu telÃ©fono</div>
    </div>
    <div class="fgroup">
      <label>ğŸ  DirecciÃ³n *</label>
      <textarea id="fAddr" rows="3" placeholder="Calle, nÃºmero, municipio..."></textarea>
      <div class="ferr" id="fAddrErr">âš  Ingresa tu direcciÃ³n</div>
    </div>
    <div class="fgroup">
      <label>ğŸ“ Nota (opcional)</label>
      <textarea id="fNote" rows="2" placeholder="Talla, color, referencia..."></textarea>
    </div>
    <button class="wa-btn" onclick="sendOrder()">ğŸ’¬ Enviar por WhatsApp</button>
  </div>
</div>

<!-- LIGHTBOX -->
<div class="lb" id="lb">
  <div class="lb-head">
    <span class="lb-name" id="lbName"></span>
    <button class="lb-close" onclick="closeLb()">âœ•</button>
  </div>
  <div class="lb-body" id="lbBody">
    <button class="lb-arrow prev" id="lbPrev" onclick="lbShift(-1)">&#8592;</button>
    <div id="lbContent"></div>
    <button class="lb-arrow next" id="lbNext" onclick="lbShift(1)">&#8594;</button>
  </div>
  <div class="lb-foot"><div class="lb-counter" id="lbCounter"></div></div>
</div>

<div class="toast" id="toast"></div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â• PRODUCTOS â•â•â•â•â•â•â•â•â•â•â•â• */
const DB = {
  men: [
    { id:'m1',  name:'Camisa Negra de Perlas',      brand:'CHULO', price:13000, old:null,  cat:'tshirts',   img:['images/camisa1.jpg'],    badge:'sale', disc:'' },
    { id:'m2',  name:'Mono Deportivo',               brand:'CHULO', price:8000,  old:null,  cat:'pants',     img:['images/mono.jpg'],       badge:'new',  disc:'' },
    { id:'m3',  name:'PantalÃ³n de Mezclilla',         brand:'CHULO', price:15000, old:null,  cat:'pants',     img:['images/pantalon1.jpg'],  badge:'hot',  disc:'-13%' },
    { id:'m4',  name:'Adidas Campus',                brand:'CHULO', price:20000, old:null,  cat:'shoes',     img:['images/zapat.jpg'],      badge:'sale', disc:'-10%' },
    { id:'m5',  name:'PantalÃ³n Cargo Pierna Ancha',   brand:'CHULO', price:12000, old:null,  cat:'pants',     img:['images/shor1.jpg'],      badge:'new',  disc:'' },
    { id:'m6',  name:'Jeans Denim ClÃ¡sico',           brand:'CHULO', price:1600,  old:null,  cat:'pullovers', img:['images/abrigo.jpg'],     badge:'hot',  disc:'' },
    { id:'m7',  name:'Short Kingpin Perlado',         brand:'CHULO', price:14000, old:null,  cat:'pants',     img:['images/shorP2.jpg'],     badge:'sale', disc:'' },
    { id:'m8',  name:'Pullover Media Cremallera',     brand:'CHULO', price:1500,  old:null,  cat:'pullovers', img:['images/camisalarga.jpg'],badge:'new',  disc:'' },
    { id:'m9',  name:'PantalÃ³n Vaquero',              brand:'CHULO', price:1700,  old:3000,  cat:'pants',     img:['images/vaquero.jpg'],    badge:null,   disc:'' },
    { id:'m10', name:'Zapatillas Low-Top',            brand:'CHULO', price:1800,  old:3200,  cat:'shoes',     img:['ğŸ‘Ÿ'], badge:'sale', disc:'' },
    { id:'m11', name:'Botas Plataforma',              brand:'CHULO', price:2400,  old:null,  cat:'shoes',     img:['ğŸ‘'], badge:'new',  disc:'' },
    { id:'m12', name:'Alpargatas de Lona',            brand:'CHULO', price:1000,  old:1600,  cat:'shoes',     img:['ğŸ©´'], badge:'hot',  disc:'-37%' },
    { id:'m13', name:'Gorra Bordada',                 brand:'CHULO', price:400,   old:800,   cat:'hats',      img:['ğŸ§¢'], badge:'sale', disc:'-50%' },
    { id:'m14', name:'Sombrero Cubo de Lana',         brand:'CHULO', price:600,   old:null,  cat:'hats',      img:['ğŸ©'], badge:'new',  disc:'' },
    { id:'m15', name:'Snapback Vintage',              brand:'CHULO', price:500,   old:1000,  cat:'hats',      img:['ğŸ§¢'], badge:null,   disc:'' },
    { id:'m16', name:'Gabardina Trench',              brand:'CHULO', price:2800,  old:5200,  cat:'garments',  img:['ğŸ§¥'], badge:'sale', disc:'-46%' },
    { id:'m17', name:'Chaqueta de Mezclilla',         brand:'CHULO', price:2000,  old:null,  cat:'garments',  img:['ğŸ§¥'], badge:'new',  disc:'' },
    { id:'m18', name:'Blazer Sport',                  brand:'CHULO', price:3200,  old:5200,  cat:'garments',  img:['ğŸ¥¼'], badge:'hot',  disc:'-38%' },
  ],
  women: [
    { id:'w1',  name:'Camiseta Crop Acanalada',      brand:'CHULO', price:500,  old:900,   cat:'tshirts',   img:['https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600&q=80'], badge:'sale', disc:'-45%' },
    { id:'w2',  name:'Camiseta Estampado Floral',    brand:'CHULO', price:650,  old:null,  cat:'tshirts',   img:['https://images.unsplash.com/photo-1585487000160-6ebcfceb0d03?w=600&q=80'], badge:'new',  disc:'' },
    { id:'w3',  name:'Camiseta Tie-Dye Oversize',    brand:'CHULO', price:750,  old:1300,  cat:'tshirts',   img:['https://images.unsplash.com/photo-1529374255404-311a2a4f1fd9?w=600&q=80'], badge:'hot',  disc:'-42%' },
    { id:'w4',  name:'PantalÃ³n Tiro Alto',           brand:'CHULO', price:1300, old:2200,  cat:'pants',     img:['https://images.unsplash.com/photo-1596755094514-f87e34085b2c?w=600&q=80'], badge:'sale', disc:'-41%' },
    { id:'w5',  name:'PantalÃ³n Lino Pierna Ancha',   brand:'CHULO', price:1500, old:null,  cat:'pants',     img:['https://images.unsplash.com/photo-1509551388413-e18d0ac5d495?w=600&q=80'], badge:'new',  disc:'' },
    { id:'w6',  name:'Jeans Skinny Rotos',           brand:'CHULO', price:1400, old:2300,  cat:'pants',     img:['https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=600&q=80'], badge:null,   disc:'' },
    { id:'w7',  name:'Pullover Hombro Descubierto',  brand:'CHULO', price:1100, old:2000,  cat:'pullovers', img:['https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=600&q=80'], badge:'sale', disc:'-45%' },
    { id:'w8',  name:'Pullover Crop de Punto',       brand:'CHULO', price:1400, old:null,  cat:'pullovers', img:['https://images.unsplash.com/photo-1576566588028-4147f3842f27?w=600&q=80'], badge:'new',  disc:'' },
    { id:'w9',  name:'SuÃ©ter Oversize Trenzado',     brand:'CHULO', price:1800, old:3000,  cat:'pullovers', img:['https://images.unsplash.com/photo-1583846783214-7229a91b20ed?w=600&q=80'], badge:null,   disc:'' },
    { id:'w10', name:'Botines de TacÃ³n',             brand:'CHULO', price:2200, old:3600,  cat:'shoes',     img:['https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=600&q=80'], badge:'sale', disc:'-39%' },
    { id:'w11', name:'Zapatillas con Plataforma',    brand:'CHULO', price:2000, old:null,  cat:'shoes',     img:['https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?w=600&q=80'], badge:'new',  disc:'' },
    { id:'w12', name:'Sandalias con Tiras',          brand:'CHULO', price:1200, old:2000,  cat:'shoes',     img:['https://images.unsplash.com/photo-1515347619252-60a4bf4fff4f?w=600&q=80'], badge:'hot',  disc:'-40%' },
    { id:'w13', name:'Sombrero con Lazo',            brand:'CHULO', price:500,  old:900,   cat:'hats',      img:['https://images.unsplash.com/photo-1582791694770-cbdc9dda338f?w=600&q=80'], badge:'sale', disc:'-44%' },
    { id:'w14', name:'Sombrero de Sol',              brand:'CHULO', price:700,  old:null,  cat:'hats',      img:['https://images.unsplash.com/photo-1529958030586-3aae4ca485ff?w=600&q=80'], badge:'new',  disc:'' },
    { id:'w15', name:'Boina de Lana',                brand:'CHULO', price:550,  old:1000,  cat:'hats',      img:['https://images.unsplash.com/photo-1510598155-17c9571c2b95?w=600&q=80'], badge:null,   disc:'' },
    { id:'w16', name:'Vestido Midi Floral',          brand:'CHULO', price:1800, old:3200,  cat:'garments',  img:['https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?w=600&q=80'], badge:'sale', disc:'-44%' },
    { id:'w17', name:'Chaqueta Cuero SintÃ©tico',     brand:'CHULO', price:2400, old:null,  cat:'garments',  img:['https://images.unsplash.com/photo-1551028719-00167b16eac5?w=600&q=80'], badge:'new',  disc:'' },
    { id:'w18', name:'Blazer Entallado',             brand:'CHULO', price:2800, old:4400,  cat:'garments',  img:['https://images.unsplash.com/photo-1548126032-079a0fb0099d?w=600&q=80'], badge:'hot',  disc:'-36%' },
  ]
};

/* â•â•â•â•â•â•â•â•â•â•â•â• ESTADO â•â•â•â•â•â•â•â•â•â•â•â• */
let gender = 'men', cat = 'all', cart = {}, wish = new Set();
const isUrl = s => s && (s.startsWith('http') || s.startsWith('/') || s.startsWith('images/'));
const fmt   = n => '$' + Math.round(n).toLocaleString('es-CU');
const find  = id => DB.men.find(x=>x.id===id) || DB.women.find(x=>x.id===id);

/* â•â•â•â•â•â•â•â•â•â•â•â• TEMA â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleTheme() {
  const html = document.documentElement;
  const next = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', next);
  document.getElementById('modeBtn').textContent = next === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
  try { localStorage.setItem('cs-theme', next); } catch(e) {}
}
function initTheme() {
  let t = 'light';
  try { t = localStorage.getItem('cs-theme') || 'light'; } catch(e) {}
  document.documentElement.setAttribute('data-theme', t);
  document.getElementById('modeBtn').textContent = t === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
}

/* â•â•â•â•â•â•â•â•â•â•â•â• VITRINA â•â•â•â•â•â•â•â•â•â•â•â• */
let scItems = [], scIdx = 0, scTimer = null;
function buildScItems() {
  const all = [...DB[gender]];
  scItems = [...all.filter(p=>isUrl(p.img[0])), ...all.filter(p=>!isUrl(p.img[0]))];
}
function renderDots(total, active) {
  const n = Math.min(total, 8);
  document.getElementById('scDots').innerHTML =
    Array.from({length:n}, (_,i) => `<div class="sc-dot ${i===active%n?'on':''}"></div>`).join('');
}
function showScItem(idx, first) {
  const p = scItems[idx % scItems.length];
  const card = document.getElementById('scCard');
  if (!first) { card.classList.remove('in'); card.classList.add('out'); }
  const update = () => {
    const src = p.img[0];
    document.getElementById('scImgInner').innerHTML = isUrl(src)
      ? `<img src="${src}" alt="${p.name}" loading="lazy">` : src;
    document.getElementById('scName').textContent  = p.name;
    document.getElementById('scPrice').textContent = fmt(p.price);
    const badge = document.getElementById('scBadge');
    if (p.badge) {
      badge.textContent = p.disc ? p.disc+' DESC' : {sale:'OFERTA',new:'NUEVO',hot:'TOP'}[p.badge];
      badge.style.display = 'block';
    } else { badge.style.display = 'none'; }
    renderDots(scItems.length, idx);
    card.classList.remove('out');
    requestAnimationFrame(() => requestAnimationFrame(() => card.classList.add('in')));
  };
  if (first) update(); else setTimeout(update, 400);
}
function startShowcase() {
  clearInterval(scTimer);
  buildScItems();
  if (!scItems.length) return;
  scIdx = 0; showScItem(scIdx, true);
  scTimer = setInterval(() => { scIdx=(scIdx+1)%scItems.length; showScItem(scIdx,false); }, 3200);
}

/* â•â•â•â•â•â•â•â•â•â•â•â• RENDER GRID â•â•â•â•â•â•â•â•â•â•â•â• */
function render() {
  const list = DB[gender].filter(p => cat==='all' || p.cat===cat);
  document.getElementById('shopTitle').textContent = `COLECCIÃ“N ${gender==='men'?'HOMBRE':'MUJER'}`;
  document.getElementById('shopCount').textContent = `${list.length} artÃ­culos`;
  document.getElementById('heroDeco').textContent  = gender==='men' ? 'CHULO' : 'CHULA';
  const bmap = { sale:'OFERTA', new:'NUEVO', hot:'TOP' };

  document.getElementById('grid').innerHTML = list.map(p => {
    const src = p.img[0];
    const inCart = cart[p.id] ? cart[p.id].qty : 0;
    const inWish = wish.has(p.id);
    return `<div class="pcard" onclick="openLb('${p.id}')">
      ${p.badge ? `<span class="pbadge pbadge-${p.badge}">${p.disc?p.disc+' DESC':bmap[p.badge]}</span>` : ''}
      <button class="pwish ${inWish?'on':''}" onclick="toggleWish('${p.id}',this,event)">${inWish?'â¤ï¸':'ğŸ¤'}</button>
      <div class="pimg-wrap"><div class="pimg-inner">
        ${isUrl(src)?`<img src="${src}" alt="${p.name}" loading="lazy">`:src}
      </div></div>
      <div class="pinfo">
        <div class="pbrand">${p.brand}</div>
        <div class="pname">${p.name}</div>
        <div class="pprice-row">
          <span class="pprice">${fmt(p.price)}</span>
          ${p.old?`<span class="pprice-old">${fmt(p.old)}</span>`:''}
          ${p.disc?`<span class="pdiscount">${p.disc}</span>`:''}
        </div>
        <button class="padd ${inCart?'added':''}" onclick="addCart('${p.id}',event)">
          ${inCart?`âœ“ En carrito (${inCart})`:'+ Agregar'}
        </button>
      </div>
    </div>`;
  }).join('');
}

function setGender(g, btn) {
  gender = g;
  document.querySelectorAll('.gbtn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  render(); startShowcase();
}
function setCat(c, btn) {
  cat = c;
  document.querySelectorAll('.ctab').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  render();
}

/* â•â•â•â•â•â•â•â•â•â•â•â• CARRITO â•â•â•â•â•â•â•â•â•â•â•â• */
function addCart(id, e) {
  e.stopPropagation();
  const p = find(id); if (!p) return;
  cart[id] ? cart[id].qty++ : (cart[id] = {...p, qty:1});
  updateCart(); render(); updateWishPanel();
  toast(`ğŸ›’ ${p.name} agregado`);
}
function updateQty(id, d) {
  if (!cart[id]) return;
  cart[id].qty += d;
  if (cart[id].qty <= 0) delete cart[id];
  updateCart(); render(); updateWishPanel();
}
function delItem(id) { delete cart[id]; updateCart(); render(); updateWishPanel(); }
function toggleCart() {
  document.getElementById('cartPanel').classList.toggle('open');
  document.getElementById('cartOverlay').classList.toggle('open');
}
function updateCart() {
  const items = Object.values(cart);
  const total = items.reduce((s,i) => s+i.price*i.qty, 0);
  const count = items.reduce((s,i) => s+i.qty, 0);
  document.getElementById('cartBadge').textContent = count;
  document.getElementById('cartTotal').textContent = fmt(total);
  const box = document.getElementById('cartItems');
  if (!items.length) {
    box.innerHTML = `<div class="cart-empty-msg"><div class="big">ğŸ›ï¸</div><p>Tu carrito estÃ¡ vacÃ­o</p></div>`;
    return;
  }
  box.innerHTML = items.map(i => {
    const s = i.img[0];
    return `<div class="citem">
      <div class="citem-img">${isUrl(s)?`<img src="${s}" alt="${i.name}">`:s}</div>
      <div class="citem-info">
        <div class="citem-name">${i.name}</div>
        <div class="citem-brand">${i.brand}</div>
        <div class="citem-price">${fmt(i.price*i.qty)}</div>
        <div class="citem-controls">
          <button class="qty-b" onclick="updateQty('${i.id}',-1)">âˆ’</button>
          <span class="qty-n">${i.qty}</span>
          <button class="qty-b" onclick="updateQty('${i.id}',1)">+</button>
          <button class="del-b" onclick="delItem('${i.id}')">ğŸ—‘</button>
        </div>
      </div>
    </div>`;
  }).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â• FAVORITOS â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleWish(id, btn, e) {
  e.stopPropagation();
  if (wish.has(id)) {
    wish.delete(id);
    btn.textContent = 'ğŸ¤'; btn.classList.remove('on');
  } else {
    wish.add(id);
    btn.textContent = 'â¤ï¸'; btn.classList.add('on');
    toast('â¤ï¸ Guardado en favoritos');
  }
  updateWishPanel();
}

function openWishPanel() {
  document.getElementById('wishPanel').classList.add('open');
  document.getElementById('wishOverlay').classList.add('open');
}
function closeWishPanel() {
  document.getElementById('wishPanel').classList.remove('open');
  document.getElementById('wishOverlay').classList.remove('open');
}

function updateWishPanel() {
  const items = [...wish].map(id => find(id)).filter(Boolean);
  const count = items.length;

  // Actualizar contador en el botÃ³n del nav
  const nc = document.getElementById('wishNavCount');
  nc.textContent = count;
  nc.classList.toggle('show', count > 0);

  const box = document.getElementById('wishBody');
  if (!items.length) {
    box.innerHTML = `
      <div class="wish-empty">
        <div class="big">ğŸ¤</div>
        <p>AÃºn no tienes favoritos.<br>Toca el corazÃ³n en cualquier<br>producto para guardarlo aquÃ­.</p>
      </div>`;
    return;
  }
  box.innerHTML = items.map(p => {
    const s = p.img[0];
    const inCart = cart[p.id] ? cart[p.id].qty : 0;
    return `<div class="witem">
      <div class="witem-img">${isUrl(s)?`<img src="${s}" alt="${p.name}">`:s}</div>
      <div class="witem-info">
        <div>
          <div class="witem-name">${p.name}</div>
          <div class="witem-price">${fmt(p.price)}</div>
        </div>
        <div class="witem-actions">
          <button class="witem-add ${inCart?'added':''}" onclick="addFromWish('${p.id}')">
            ${inCart ? `âœ“ En carrito (${inCart})` : '+ Al carrito'}
          </button>
          <button class="witem-del" onclick="removeWish('${p.id}')" title="Quitar de favoritos">ğŸ—‘</button>
        </div>
      </div>
    </div>`;
  }).join('');
}

function addFromWish(id) {
  const p = find(id); if (!p) return;
  cart[id] ? cart[id].qty++ : (cart[id] = {...p, qty:1});
  updateCart(); updateWishPanel(); render();
  toast(`ğŸ›’ ${p.name} agregado al carrito`);
}
function removeWish(id) {
  wish.delete(id);
  updateWishPanel(); render();
  toast('ğŸ’” Eliminado de favoritos');
}

/* â•â•â•â•â•â•â•â•â•â•â•â• LIGHTBOX â•â•â•â•â•â•â•â•â•â•â•â• */
let lbProd = null, lbIdx2 = 0;
function openLb(id) {
  lbProd = find(id); if (!lbProd) return;
  lbIdx2 = 0;
  document.getElementById('lbName').textContent = lbProd.name;
  updateLb();
  document.getElementById('lb').classList.add('open');
  document.body.style.overflow = 'hidden';
}
function closeLb() { document.getElementById('lb').classList.remove('open'); document.body.style.overflow=''; }
function lbShift(d) { lbIdx2=(lbIdx2+d+lbProd.img.length)%lbProd.img.length; updateLb(); }
function updateLb() {
  const src = lbProd.img[lbIdx2];
  document.getElementById('lbContent').innerHTML = isUrl(src)
    ? `<img src="${src}" alt="${lbProd.name}">`
    : `<div class="lb-emoji">${src}</div>`;
  document.getElementById('lbCounter').textContent =
    lbProd.img.length > 1 ? `${lbIdx2+1} / ${lbProd.img.length}` : '';
  document.getElementById('lbPrev').style.display = lbProd.img.length>1?'flex':'none';
  document.getElementById('lbNext').style.display = lbProd.img.length>1?'flex':'none';
}
document.getElementById('lb').addEventListener('click', function(e) {
  if (e.target===this||e.target===document.getElementById('lbBody')) closeLb();
});
document.addEventListener('keydown', e => {
  if (!document.getElementById('lb').classList.contains('open')) return;
  if (e.key==='ArrowRight') lbShift(1);
  else if (e.key==='ArrowLeft') lbShift(-1);
  else if (e.key==='Escape') closeLb();
});

/* â•â•â•â•â•â•â•â•â•â•â•â• FORMULARIO â•â•â•â•â•â•â•â•â•â•â•â• */
function openOrder() {
  if (!Object.keys(cart).length) { toast('âš ï¸ El carrito estÃ¡ vacÃ­o'); return; }
  const items = Object.values(cart);
  const total = items.reduce((s,i)=>s+i.price*i.qty,0);
  document.getElementById('orderItems').innerHTML =
    items.map(i=>`<div class="order-item-row"><span>${i.name} Ã—${i.qty}</span><span>${fmt(i.price*i.qty)}</span></div>`).join('');
  document.getElementById('orderTotal').textContent = fmt(total);
  ['fName','fPhone','fAddr','fNote'].forEach(id => {
    document.getElementById(id).value='';
    document.getElementById(id).classList.remove('err');
  });
  ['fNameErr','fPhoneErr','fAddrErr'].forEach(id=>document.getElementById(id).classList.remove('show'));
  document.getElementById('orderOverlay').classList.add('open');
  document.body.style.overflow='hidden';
}
function closeOrder() {
  document.getElementById('orderOverlay').classList.remove('open');
  document.body.style.overflow='';
}
document.getElementById('orderOverlay').addEventListener('click',function(e){if(e.target===this)closeOrder();});

function sendOrder() {
  const name  = document.getElementById('fName').value.trim();
  const phone = document.getElementById('fPhone').value.trim();
  const addr  = document.getElementById('fAddr').value.trim();
  const note  = document.getElementById('fNote').value.trim();
  let ok = true;
  const chk = (v,f,e) => {
    if (!v){document.getElementById(f).classList.add('err');document.getElementById(e).classList.add('show');ok=false;}
    else{document.getElementById(f).classList.remove('err');document.getElementById(e).classList.remove('show');}
  };
  chk(name,'fName','fNameErr'); chk(phone,'fPhone','fPhoneErr'); chk(addr,'fAddr','fAddrErr');
  if (!ok) { toast('âš ï¸ Completa los campos obligatorios'); return; }
  const items = Object.values(cart);
  const total = items.reduce((s,i)=>s+i.price*i.qty,0);
  const msg =
    `ğŸ›ï¸ *NUEVO PEDIDO â€” CHULO SHOP*\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`+
    `ğŸ‘¤ *Nombre:* ${name}\nğŸ“ *Tel:* ${phone}\nğŸ  *Dir:* ${addr}\n`+
    (note?`ğŸ“ *Nota:* ${note}\n`:'')+`â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`+
    items.map(i=>`â€¢ ${i.name} Ã—${i.qty} â€” ${fmt(i.price*i.qty)}`).join('\n')+
    `\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ’° *TOTAL: ${fmt(total)}*\n`+
    `ğŸ“… ${new Date().toLocaleString('es-CU')}\n\nÂ¡Hola! Quiero confirmar este pedido ğŸ˜Š`;
  window.open(`https://wa.me/5355562204?text=${encodeURIComponent(msg)}`,'_blank');
  toast('âœ… Abriendo WhatsApp...');
  closeOrder(); toggleCart();
  cart={}; updateCart(); render(); updateWishPanel();
}

/* â•â•â•â•â•â•â•â•â•â•â•â• TOAST â•â•â•â•â•â•â•â•â•â•â•â• */
let toastT;
function toast(msg) {
  const el = document.getElementById('toast');
  el.textContent = msg; el.classList.add('show');
  clearTimeout(toastT);
  toastT = setTimeout(()=>el.classList.remove('show'), 2600);
}

/* â•â•â•â•â•â•â•â•â•â•â•â• INIT â•â•â•â•â•â•â•â•â•â•â•â• */
initTheme();
updateCart();
updateWishPanel();
render();
startShowcase();
</script>
</body>
</html>